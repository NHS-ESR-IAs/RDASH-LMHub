<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZCMBFWQ94L"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-ZCMBFWQ94L');
  </script>
  <meta charset="UTF-8">
  <title>RDaSH Line Manager Resource Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap 5 (only once) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css">

  <!-- FullCalendar CSS -->
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet">

  <link rel="stylesheet" href="./style.css">
</head>

<body>
  <!-- ======================================================
=                     NAVIGATION SECTION                  =
========================================================= -->
  <header class="nhs-header">
    <div class="container">
      <div class="row">
        <h1>Line Manager Resource Hub</h1>
        <!--<div class="banner-wrapper">
          <img src="https://assets.codepen.io/8889025/MY-Logo-Banner.png" class="Banner_image" alt="Welcome Hub Banner">
          <div class="banner-text-overlay">
            
          </div>-->
      </div>
      <nav class="navbar navbar-expand-lg">
        <div class="container">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu"
            aria-label="Toggle navigation menu">
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse" id="navMenu">
            <div class="logo-container">
              <img src="https://assets.codepen.io/8889025/RDaSH_LMRH8a.png" class="logo esr" />
              <img src="https://assets.codepen.io/8889025/RDaSH_LMRH8a.png" class="logo nhs" />
            </div>

            <ul class="navbar-nav mx-auto">
              <li class="nav-item"><a class="nav-link" onclick="showPage('home')">Home</a></li>
              <li class="nav-item"><a class="nav-link" onclick="showPage('Course_Catalogue')">Course Catalogue</a></li>
            </ul>
          </div>
        </div>
      </nav>

      <!-- Combined Toolbar and Search -->
      <div class="container mt-3">
        <div class="row align-items-center g-2">
          <!-- Search Bar (left, stretches as needed) -->
          <div class="col">
            <input type="text" id="searchInput" class="form-control" placeholder="Search bar" onkeyup="searchPages()">
          </div>
          <!-- Control Panel (right, auto-width) -->
          <div class="col-auto">
            <div class="d-flex flex-wrap align-items-center gap-2 control-toolbar p-2 rounded">
              <!-- Theme Selector -->
              <label for="themeSelector" class="visually-hidden">Choose Theme</label>
              <select id="themeSelector" class="form-select form-select-sm w-auto">
                <option value="blue">üíô NHS Blue</option>
                <option value="green">üíö NHS Green</option>
                <option value="grey">ü©∂ NHS Grey</option>
                <option value="pink">üíó NHS Pink</option>
                <option value="purple">üíú NHS Purple</option>
                <option value="red">‚ù§Ô∏è NHS Red</option>
                <option value="yellow">üíõ NHS Yellow</option>
                <option value="calm">üå´ Calm Grey</option>
                <option value="contrast">‚ö†Ô∏è High Contrast</option>
              </select>
              <!-- Text Scaling -->
              <div class="btn-group btn-group-sm" role="group" aria-label="Text Size">
                <button onclick="setTextSize('scale-small')" class="btn btn-outline-secondary">A‚Äì</button>
                <button onclick="setTextSize('scale-medium')" class="btn btn-outline-secondary">A</button>
                <button onclick="setTextSize('scale-large')" class="btn btn-outline-secondary">A+</button>
                <button onclick="setTextSize('scale-xlarge')" class="btn btn-outline-secondary">A++</button>
              </div>
              <!-- Dark Mode 
                <button id="toggleDark" class="btn btn-sm btn-outline-primary">
                  üåô Dark Mode
                </button>-->
            </div>
          </div>
        </div>
      </div>
  </header>
  <!--<div class="banner-wrapper">
    <img src="https://assets.codepen.io/8889025/MY-Logo-Banner.png" class="Banner_image" alt="Welcome Hub Banner">
    <div class="banner-text-overlay">
      <h2>Learning and Development Hub</h2>
    </div>-->
  </div>
  <!-- ======================================================
=                     HOME PAGE SECTION                   =
========================================================= -->
  <div id="home" class="page active">
    <div class="container">
      <div class="row">
        <div class="col">
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
              <li class="breadcrumb-item active" aria-current="page">Line Manager Resource Hub</li>
            </ol>
          </nav>
        </div>
      </div>
      <!--Alternate placng for banner-wrapper -->
      <div class="row">
        <div class="col">
          <h5>The role of a line manager is vital to how we feel at work, and to delivering patient services. You give
            direction, help clarify individual and team objectives, and are instrumental in ensuring colleagues feel
            valued, supported, and cared for at work.</h5>
          <h5>Here you will find information and resources to support you in your role as a Line Manager.</h5>
          <h5>Click on the cogs to navigate your way around the hub.</h5>

        </div>
      </div>
      <div class="row">
        <div class="col">
          <div id="bod">
            <div class="cog cog1" onclick="showPage('LMRH_MP');">
              <div class="spoke"></div>
              <div class="spoke spoke1"></div>
              <div class="spoke spoke2"></div>
              <div class="spoke spoke3"></div>
              <div class="hole hole1">Managing People</div>
            </div>
            <div class="sm_cog sm_cog2">
              <div class="sm_spoke"></div>
              <div class="sm_spoke sm_spoke1"></div>
              <div class="sm_spoke sm_spoke2"></div>
              <div class="sm_spoke sm_spoke3"></div>
              <div class="sm_hole sm_hole2"></div>
            </div>
            <div class="cog cog3" onclick="showPage('LMRH_SP');">
              <div class="spoke"></div>
              <div class="spoke spoke1"></div>
              <div class="spoke spoke2"></div>
              <div class="spoke spoke3"></div>
              <div class="hole hole3">Systems and Processes</div>
            </div>
            <div class="sm_cog sm_cog4">
              <div class="sm_spoke"></div>
              <div class="sm_spoke sm_spoke1"></div>
              <div class="sm_spoke sm_spoke2"></div>
              <div class="sm_spoke sm_spoke3"></div>
              <div class="sm_hole sm_hole4"></div>
            </div>
            <div class="cog cog5" onclick="showPage('LMRH_LC');">
              <div class="spoke"></div>
              <div class="spoke spoke1"></div>
              <div class="spoke spoke2"></div>
              <div class="spoke spoke3"></div>
              <div class="hole hole5">Leadership and Culture</div>
            </div>
            <div class="sm_cog sm_cog6">
              <div class="sm_spoke"></div>
              <div class="sm_spoke sm_spoke1"></div>
              <div class="sm_spoke sm_spoke2"></div>
              <div class="sm_spoke sm_spoke3"></div>
              <div class="sm_hole sm_hole6"></div>
            </div>
            <div class="cog cog7" onclick="showPage('LMRH_LMTP');">
              <div class="spoke"></div>
              <div class="spoke spoke1"></div>
              <div class="spoke spoke2"></div>
              <div class="spoke spoke3"></div>
              <div class="hole hole7">Line Management Training Catalogue</div>
            </div>
            <div class="center-text" id="center-text"></div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <h5>What's new</h5>
          <p><b>4th December 2024</b></p>
          <ul>
            <li><a href="#" onclick="showPage('LMRH_MP2b');">Apprenticeship First</a>
          </ul>
          <p><b>May 2025</b></p>
          <ul>
            <li><a href="#" onclick="showPage('LMRH_SP12');">Radar Healthcare page - outlining our new Risk, Audit and
                Quality Assurance System</a>
            <li><a href="#" onclick="showPage('LMRH_LMTP');">More learning sessions added to the Line Management
                Training Catalogue</a>
          </ul>
          <p><b>June 2025</b></p>
          <ul>
            <li><a href="#" onclick="showPage('LMRH_LC4');">Leadership Apprenticeships
              </a>
          </ul>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <img src="https://assets.codepen.io/8889025/RDaSH_LMRH4.png" class="footer_image" />
        </div>
      </div>

    </div>
  </div>
  <!-- ======================================================
  = Course Catalogue SECTION =
  ========================================================= -->
  <div id="Course_Catalogue" class="page">
    <div class="container">
      <div class="row">
        <div class="col">
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
              <li class="breadcrumb-item"><a href="#" onclick="showPage('home');">Learning Resource Hub</a></li>
              <li class="breadcrumb-item active" aria-current="page">Course Catalogue</li>
            </ol>
          </nav>
        </div>
      </div>

      <div class="row">
        <div class="col-md-4 gradient-col d-flex align-items-center justify-content-center">
          <h3 class="gradient-text">Course Catalogue</h3>
        </div>
        <div class="col-md-8 text-start"></div>
      </div>
      <!-- Search bar -->
      <div class="row mb-3">
        <div class="col">
          <div class="input-group">
            <span class="input-group-text">Search</span>
            <input type="text" id="calendarSearch" class="form-control"
              placeholder="Filter by course, category, trainer...">
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <!-- Calendar container -->
          <div id="calendar"></div>
        </div>
      </div>

      <!-- Modal for class details -->
      <div class="modal fade" id="classModal" tabindex="-1" aria-labelledby="classModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="classModalLabel">Class Details</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
              <dl class="row" id="modalDetails"></dl>
            </div>
            <div class="modal-footer">
              <a id="modalLink" href="#" target="_blank" class="btn btn-primary">Go to Offering</a>
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <img src="https://assets.codepen.io/8889025/RDaSH_LMRH4.png" class="footer_image" />
        </div>
      </div>
    </div>
  </div>



  <!-- JS libraries -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
  <script src="./script.js"></script>
  <script>
    function excelDateToJSDate(serial) {
      const excelEpoch = new Date(Date.UTC(1899, 11, 30));
      return new Date(excelEpoch.getTime() + serial * 86400000);
    }

    let allEvents = [];
    let calendar;
    let calendarInitialized = false;

    function initCalendar() {
      if (calendarInitialized) return;
      calendarInitialized = true;

      fetch("Data/ClassList.json")
        .then(response => response.json())
        .then(classData => {
          allEvents = classData.map(item => {
            const startDate = excelDateToJSDate(item["Start Date"]);
            const endDate = excelDateToJSDate(item["End Date"]);

            let start = new Date(startDate);
            let end = new Date(endDate);

            if (item["Start Time"]) {
              const [h, m] = item["Start Time"].split(":");
              start.setHours(h, m);
            }
            if (item["End Time"]) {
              const [h, m] = item["End Time"].split(":");
              end.setHours(h, m);
            }

            return {
              title: item.Course,
              start: start,
              end: end,
              extendedProps: item
            };
          });

          const calendarEl = document.getElementById('calendar');
          calendar = new FullCalendar.Calendar(calendarEl, {
            // Default view = weekly
            initialView: 'timeGridWeek',

            // Add navigation + view switcher
            headerToolbar: {
              left: 'prev,next today',
              center: 'title',
              right: 'timeGridDay,timeGridWeek,dayGridMonth'
            },

            events: allEvents,
            eventClick: function (info) {
              info.jsEvent.preventDefault();
              const data = info.event.extendedProps;

              const detailsEl = document.getElementById('modalDetails');
              detailsEl.innerHTML = "";
              for (const [key, value] of Object.entries(data)) {
                if (value !== null && key !== "Offering link") {
                  const dt = document.createElement("dt");
                  dt.className = "col-sm-4";
                  dt.textContent = key;
                  const dd = document.createElement("dd");
                  dd.className = "col-sm-8";
                  dd.textContent = value;
                  detailsEl.appendChild(dt);
                  detailsEl.appendChild(dd);
                }
              }

              const linkEl = document.getElementById('modalLink');
              if (data["Offering link"]) {
                linkEl.href = data["Offering link"];
                linkEl.style.display = "inline-block";
              } else {
                linkEl.style.display = "none";
              }

              const modal = new bootstrap.Modal(document.getElementById('classModal'));
              modal.show();
            }
          });
          calendar.render();

          // üîç Search filter
          document.getElementById('calendarSearch').addEventListener('input', function () {
            const query = this.value.toLowerCase();
            const filtered = allEvents.filter(ev => {
              const props = ev.extendedProps;
              return (
                ev.title.toLowerCase().includes(query) ||
                (props.Category && props.Category.toLowerCase().includes(query)) ||
                (props["Last Updated By"] && props["Last Updated By"].toLowerCase().includes(query))
              );
            });
            calendar.removeAllEvents();
            calendar.addEventSource(filtered);
          });
        });
    }

  </script>
</body>

</html>